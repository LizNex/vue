<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>abstract example</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.20/lodash.js"></script>
    <script src="../../dist/vue.js"></script>
  </head>
  <body>
    <div id="app">
      <button @click="clickHandler">普通按钮</button>
      <debounce>
        <button @click="clickHandler">防抖按钮</button>
      </debounce>
    </div>

    <script>
      const {set,get,debounce} = _ 
      Vue.component("debounce", {
        name: "debounce",
        /** 标记为抽象组件 */
        abstract: true,  
        render() {
          debugger
          let vnode = this.$slots.default[0]; // 子组件的vnode
          if (vnode) {
            let event = get(vnode, `data.on.click`); // 子组件绑定的click事件
            if (typeof event === "function") {
              set(vnode, `data.on.click`, debounce(event, 1000));
            }
          }
          return vnode;
        },
      });

      new Vue({
        el: "#app",
        methods: {
          clickHandler(){
            console.log("click")
          }
        },
      });
    </script>
  </body>
</html>
